<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>Function_A.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">ppc1 (6 May 2023 3:38:35 am)</a> &gt; <a href="../../index.html" class="el_group">ppc1</a> &gt; <a href="../index.html" class="el_bundle">src/main/java</a> &gt; <a href="index.source.html" class="el_package">src.main.java.Function_A</a> &gt; <span class="el_source">Function_A.java</span></div><h1>Function_A.java</h1><pre class="source lang-java linenums">package src.main.java.Function_A;

import javafx.collections.FXCollections;
import javafx.collections.ObservableList;

/**
 * Function_A class is used to perform compute the optimal mix of wines to be produced in the year to maximize the gross profit of the winery
 */
<span class="fc" id="L9">public class Function_A {</span>
	private int Num_Week;
    private int Cap_Labor;
    private int Cap_Grape;
    private float Prc_Rose;
    private float Prc_Noir;
    private int Fixed_Costs;
    
    
    /**
     * Calculates the optimal volume of two wines (Rosé and P-Noir), then used them to calculate VCL, Sales Revenue, Gross Profit and Profit Margin.
     * @return A Result object that stores the returns optimal volume of Rosé, optimal volume of P-Noir, optimized total gross profits, optimized profit margin
     */
    public Result Get_Result(){
<span class="fc" id="L23">    	int Opt_Rose = 0 ;</span>
<span class="fc" id="L24">        int Opt_Noir = 0 ;</span>
<span class="fc" id="L25">        double Labor_Rate = (935/37.5/60);</span>
        
        Solver sol;
<span class="fc" id="L28">        sol = new Solver(Cap_Labor, Cap_Grape, Prc_Rose, Prc_Noir);</span>
<span class="fc" id="L29">        int[] Result = sol.Opt_Solution();</span>
<span class="fc" id="L30">        Opt_Rose += Result[0];</span>
<span class="fc" id="L31">        Opt_Noir += Result[1];</span>
        
<span class="fc" id="L33">        double VCL = ((Opt_Rose * 5 + Opt_Noir * 12) * Labor_Rate);						 		// VCL = Variable Cost of Labor</span>
<span class="fc" id="L34">        int Sales_Revenue = (int) (Math.round(Opt_Rose * Prc_Rose + Opt_Noir * Prc_Noir)); 		// Sales Revenue = Total Revenue</span>
<span class="fc" id="L35">        int Gross_Profit = (int) (Math.round(Sales_Revenue - VCL - Fixed_Costs)); 			 	// Gross Profit = Opt_Profit</span>
<span class="fc" id="L36">        double Opt_Margin_NotConv = (((double)Gross_Profit) * 100 / Sales_Revenue);				// Profit Margin = Opt_Margin</span>
<span class="fc" id="L37">        double Opt_Margin = roundTwoSigFig(Opt_Margin_NotConv, 1);								// Round Opt_Margin_NotConv to the nearest significant figure</span>
<span class="fc" id="L38">        return new Result (Opt_Rose, Opt_Noir, Gross_Profit, Opt_Margin);</span>
    }
    
    
    /**
     * @param value Optimal Margin that has not been converted to the nearest significant figure
     * @param places Round to how many significant figure
     * @return The rounded version of optimal margin
     */
    public static double roundTwoSigFig(double value, int places) {
<span class="fc" id="L48">        double scale = Math.pow(10, places);</span>
<span class="fc" id="L49">        return Math.round(value * scale) / scale;</span>
    }
    
    
    /**
     * Converts an array of input into numeric data and stores in the fields of the class.
     * @param input Contains Number of weeks, Capacity of Labor, Capacity of Grape, Price of Rosé, Price of P-Noir, Fixed Costs (in ascending order) 
     */
    public void Get_Data(String[] input){
<span class="fc" id="L58">        Num_Week = Integer.parseInt(input[0]);</span>
<span class="fc" id="L59">        Cap_Labor = Integer.parseInt(input[1]);</span>
<span class="fc" id="L60">        Cap_Grape = Integer.parseInt(input[2]);</span>
<span class="fc" id="L61">        Prc_Rose = Float.parseFloat(input[3]);</span>
<span class="fc" id="L62">        Prc_Noir = Float.parseFloat(input[4]);</span>
<span class="fc" id="L63">        Fixed_Costs = Integer.parseInt(input[5]);</span>
<span class="fc" id="L64">    }</span>
    
    
    /**
     * Checks whether the optimal solution of the volume of Rosé and P-Noir will lead to abnormal situation and produces warning messages for abnormal situations.
     * @param Opt_Rose
     * @param Opt_Noir
     * @return A list of warning messages caused by the optimal solution. The list will be empty if there is no abnormal situation happened.
     */
    public ObservableList&lt;String&gt; Get_Warning_Message(int Opt_Rose, int Opt_Noir) {

<span class="fc" id="L75">        ObservableList&lt;String&gt; items = FXCollections.observableArrayList();</span>
<span class="fc bfc" id="L76" title="All 2 branches covered.">        if(5000&lt;Opt_Rose+Opt_Noir){</span>

<span class="fc" id="L78">            items.add(&quot;w1: Insufficient production capacity to produce the optimal mix, please reduce or adjust the capacity of labor &amp; grape volume!&quot;);</span>
        }
<span class="fc bfc" id="L80" title="All 2 branches covered.">        if((Opt_Rose*6+Opt_Noir*4)&lt;Cap_Grape*0.9){</span>

<span class="fc" id="L82">            items.add(&quot;w2: Insufficient labor supplied to utilize the grape resource (less than 90%).&quot;);</span>
        }
<span class="fc" id="L84">        return items;</span>
    }
    
    
    /**
     * Validates the data input
     * @param input Contains Number of weeks, Capacity of Labor, Capacity of Grape, Price of Rosé, Price of P-Noir, Fixed Costs (in ascending order)
     * @return Generate error message(s) caused by invalid inputs. The list will be empty if all the inputs are valid.
     */
    public ObservableList&lt;String&gt; Data_Validation(String[] input){
<span class="fc" id="L94">        String[] Message = new String[]{</span>
<span class="fc" id="L95">                &quot;Input error for Number of weeks: Please enter an integer in between 1 and 15&quot;,</span>
<span class="fc" id="L96">                &quot;Input error for Capacity Of Labor: Please enter an integer greater than 0&quot;,</span>
<span class="fc" id="L97">                &quot;Input error for Capacity Of Grape: Please enter an integer greater than 0&quot;,</span>
<span class="fc" id="L98">                &quot;Input error for Price Of Rose: Please enter a number greater than 0&quot;,</span>
<span class="fc" id="L99">                &quot;Input error for Price Of P-Noir: Please enter a number greater than 0&quot;,</span>
<span class="fc" id="L100">                &quot;Input error for Fixed Costs: Please enter a number greater than 0&quot;</span>
        };
        
<span class="fc" id="L103">        Validation val = new Validation();</span>
<span class="fc" id="L104">        ObservableList&lt;String&gt; items = FXCollections.observableArrayList();</span>
<span class="pc bpc" id="L105" title="1 of 2 branches missed.">        if(!val.Check_Num_Week(input[0])){</span>
<span class="fc" id="L106">            items.add(Message[0]);</span>
        }
<span class="pc bpc" id="L108" title="1 of 2 branches missed.">        if(!val.Check_Cap_Labor(input[1])){</span>
<span class="fc" id="L109">            items.add(Message[1]);</span>
        }
<span class="pc bpc" id="L111" title="1 of 2 branches missed.">        if(!val.Check_Cap_Grape(input[2])){</span>
<span class="fc" id="L112">            items.add(Message[2]);</span>
        }
<span class="pc bpc" id="L114" title="1 of 2 branches missed.">        if (!val.Check_Prc_Rose(input[3])){</span>
<span class="fc" id="L115">            items.add(Message[3]);</span>
        }
<span class="pc bpc" id="L117" title="1 of 2 branches missed.">        if(!val.Check_Prc_Noir(input[4])){</span>
<span class="fc" id="L118">            items.add(Message[4]);</span>
        }
<span class="pc bpc" id="L120" title="1 of 2 branches missed.">        if(!val.Check_Fixed_Costs(input[5])){</span>
<span class="fc" id="L121">            items.add(Message[5]);</span>
        }
<span class="fc" id="L123">        return items;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span>ppc1 (6 May 2023 3:38:35 am)</div></body></html>